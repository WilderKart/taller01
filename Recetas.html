<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Documentación Web de Recetas</title>
    <style>
        :root {
            --color-primary: #2c3e50;
            --color-secondary: #e74c3c;
            --color-light: #ecf0f1;
            --color-accent: #3498db;
            --font-main: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            font-family: var(--font-main);
            line-height: 1.6;
            color: #333;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f9f9f9;
        }
        
        header {
            text-align: center;
            margin-bottom: 40px;
            padding: 20px;
            background-color: var(--color-primary);
            color: white;
            border-radius: 8px;
        }
        
        h1 {
            margin: 0;
            font-size: 2.2em;
        }
        
        h2 {
            color: var(--color-primary);
            border-bottom: 2px solid var(--color-accent);
            padding-bottom: 5px;
            margin-top: 30px;
        }
        
        h3 {
            color: var(--color-secondary);
        }
        
        .section {
            background-color: white;
            padding: 20px;
            margin-bottom: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        pre {
            background-color: var(--color-light);
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
        }
        
        code {
            font-family: 'Courier New', Courier, monospace;
            color: var(--color-secondary);
        }
        
        .endpoint {
            background-color: var(--color-light);
            padding: 10px;
            border-left: 4px solid var(--color-accent);
            margin: 10px 0;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        
        table, th, td {
            border: 1px solid #ddd;
        }
        
        th, td {
            padding: 12px;
            text-align: left;
        }
        
        th {
            background-color: var(--color-primary);
            color: white;
        }
        
        tr:nth-child(even) {
            background-color: #f2f2f2;
        }
        
        .file-structure {
            font-family: monospace;
            white-space: pre;
            background-color: var(--color-light);
            padding: 15px;
            border-radius: 5px;
        }
        
        .category {
            display: inline-block;
            padding: 3px 8px;
            border-radius: 4px;
            font-size: 0.8em;
            margin-right: 5px;
        }
        
        .breakfast {
            background-color: #FFD700;
        }
        
        .lunch {
            background-color: #FF5733;
            color: white;
        }
        
        .dinner {
            background-color: #3498DB;
            color: white;
        }
    </style>
</head>
<body>
    <header>
        <h1>Documentación Web de Recetas</h1>
        <p>Guía completa para implementar una aplicación web de recetas con MongoDB, Express y Node.js</p>
    </header>

    <div class="section">
        <h2>1. Análisis del Proyecto</h2>
        <h3>Objetivos</h3>
        <ul>
            <li>Crear una página web dinámica para gestionar recetas de cocina</li>
            <li>Implementar operaciones CRUD (Crear, Leer, Actualizar, Eliminar)</li>
            <li>Clasificar recetas por categorías: <span class="category breakfast">desayuno</span>, <span class="category lunch">almuerzo</span>, <span class="category dinner">cena</span></li>
            <li>Diseñar una interfaz intuitiva para usuarios no técnicos</li>
        </ul>
        
        <h3>Usuarios Esperados</h3>
        <ul>
            <li><strong>Cocineros aficionados:</strong> Acceso rápido a recetas por categoría</li>
            <li><strong>Personas ocupadas:</strong> Búsqueda por tiempo de preparación</li>
            <li><strong>Desarrolladores:</strong> Código educativo con tecnologías modernas (MERN Stack)</li>
        </ul>
    </div>

    <div class="section">
        <h2>2. Diseño de Base de Datos (MongoDB)</h2>
        <p>Colección <strong>recetas</strong> con el siguiente esquema:</p>
        
        <pre>{
  "_id": ObjectId("60d5ec9cf2b8a12a7c8f4a76"),
  "nombre": "Huevos revueltos",
  "categoria": "desayuno",
  "ingredientes": ["huevos", "sal", "pimienta"],
  "instrucciones": "Batir los huevos...",
  "tiempo_preparacion": 10,
  "imagen": "huevos-revueltos.jpg"
}</pre>
        
        <h3>Explicación de campos</h3>
        <ul>
            <li><code>categoria</code>: Filtro principal (valores permitidos: desayuno, almuerzo, cena)</li>
            <li><code>tiempo_preparacion</code>: En minutos, para búsquedas rápidas</li>
            <li><code>ingredientes</code>: Array de strings para flexibilidad</li>
            <li><code>imagen</code>: Nombre del archivo o URL (valor por defecto: 'default.jpg')</li>
        </ul>
    </div>

    <div class="section">
        <h2>3. Estructura del Proyecto</h2>
        <div class="file-structure">recetas-app/
├── backend/
│   ├── controllers/   # Lógica de operaciones (CRUD)
│   ├── models/        # Esquema de MongoDB (Mongoose)
│   ├── routes/        # Endpoints API (recetas.js)
│   ├── config/        # Conexión a MongoDB (db.js)
│   └── server.js      # Configuración de Express
└── frontend/
    ├── public/
    │   ├── index.html       # Página principal (categorías)
    │   ├── recetas.html     # Lista de recetas por categoría
    │   ├── detalle.html     # Vista detallada de una receta
    │   └── nueva.html       # Formulario de creación
    ├── css/
    │   └── estilos.css      # Estilos personalizados
    └── js/
        └── main.js          # Lógica frontend (fetch API)</div>
    </div>

    <div class="section">
        <h2>4. Modelos en Mongoose</h2>
        <p>Archivo: <code>backend/models/Receta.js</code></p>
        <pre>const mongoose = require('mongoose');

const RecetaSchema = new mongoose.Schema({
  nombre: { type: String, required: true },
  categoria: { 
    type: String, 
    required: true,
    enum: ['desayuno', 'almuerzo', 'cena']  // Valores permitidos
  },
  ingredientes: { type: [String], required: true },
  instrucciones: { type: String, required: true },
  tiempo_preparacion: { type: Number, required: true },
  imagen: { type: String, default: 'default.jpg' }
});

module.exports = mongoose.model('Receta', RecetaSchema);</pre>
    </div>

    <div class="section">
        <h2>5. Configuración del Servidor (Express)</h2>
        <p>Archivo: <code>backend/server.js</code></p>
        <pre>const express = require('express');
const mongoose = require('mongoose');
const recetasRoutes = require('./routes/recetas');

const app = express();
app.use(express.json());  // Parsear JSON

// Conexión a MongoDB (config/db.js)
mongoose.connect('mongodb+srv://user:password@cluster0.mongodb.net/recetas?retryWrites=true&w=majority');

// Rutas API
app.use('/api/recetas', recetasRoutes);

// Iniciar servidor
const PORT = process.env.PORT || 5000;
app.listen(PORT, () => console.log(`Servidor en puerto ${PORT}`));</pre>
    </div>

    <div class="section">
        <h2>6. Rutas y Controladores</h2>
        <p>Archivo: <code>backend/routes/recetas.js</code></p>
        <pre>const express = require('express');
const router = express.Router();
const RecetaController = require('../controllers/recetas');

// Endpoints
router.get('/', RecetaController.getRecetas);        // GET todas las recetas
router.get('/:id', RecetaController.getReceta);      // GET por ID
router.post('/', RecetaController.createReceta);     // POST nueva receta
router.put('/:id', RecetaController.updateReceta);   // PUT actualizar receta
router.delete('/:id', RecetaController.deleteReceta);// DELETE eliminar receta

module.exports = router;</pre>
    </div>

    <div class="section">
        <h2>7. Endpoints RESTful</h2>
        <table>
            <tr>
                <th>Método</th>
                <th>Endpoint</th>
                <th>Acción</th>
            </tr>
            <tr>
                <td>GET</td>
                <td>/api/recetas</td>
                <td>Obtener todas las recetas</td>
            </tr>
            <tr>
                <td>GET</td>
                <td>/api/recetas/:id</td>
                <td>Obtener receta por ID</td>
            </tr>
            <tr>
                <td>POST</td>
                <td>/api/recetas</td>
                <td>Crear nueva receta</td>
            </tr>
            <tr>
                <td>PUT</td>
                <td>/api/recetas/:id</td>
                <td>Actualizar receta existente</td>
            </tr>
            <tr>
                <td>DELETE</td>
                <td>/api/recetas/:id</td>
                <td>Eliminar receta</td>
            </tr>
        </table>
    </div>

    <div class="section">
        <h2>8. Desarrollo del Frontend</h2>
        <h3>Estructura de archivos</h3>
        <ul>
            <li><strong>index.html</strong>: Página principal con categorías</li>
            <li><strong>recetas.html</strong>: Listado filtrado por categoría (ej: <code>recetas.html?categoria=desayuno</code>)</li>
            <li><strong>detalle.html</strong>: Vista detallada de una receta (ID pasado por URL)</li>
            <li><strong>nueva.html</strong>: Formulario para crear recetas</li>
        </ul>
        
        <h3>Ejemplo de fetch para obtener recetas</h3>
        <pre>// frontend/js/main.js
async function getRecetas(categoria = '') {
  try {
    const url = categoria 
      ? `/api/recetas?categoria=${categoria}`
      : '/api/recetas';
      
    const response = await fetch(url);
    const data = await response.json();
    return data;
  } catch (error) {
    console.error('Error:', error);
  }
}</pre>
    </div>

    <div class="section">
        <h2>9. Estilos con CSS</h2>
        <p>Recomendaciones de diseño:</p>
        <ul>
            <li>Usar variables CSS para colores de categorías:</li>
        </ul>
        <pre>:root {
  --color-desayuno: #FFD700;
  --color-almuerzo: #FF5733;
  --color-cena: #3498DB;
}</pre>
        <p>Ejemplo de tarjeta de receta:</p>
        <pre>.receta-card {
  border: 1px solid #ddd;
  border-radius: 8px;
  padding: 15px;
  margin-bottom: 20px;
}

.receta-card.desayuno {
  border-left: 4px solid var(--color-desayuno);
}

.receta-card.almuerzo {
  border-left: 4px solid var(--color-almuerzo);
}

.receta-card.cena {
  border-left: 4px solid var(--color-cena);
}</pre>
    </div>

    <div class="section">
        <h2>10. Pruebas Locales</h2>
        <h3>Pasos para ejecutar el proyecto</h3>
        <ol>
            <li>Iniciar el backend:
                <pre>cd backend
npm install
node server.js</pre>
            </li>
            <li>Abrir el frontend:
                <ul>
                    <li>Usar la extensión <strong>Live Server</strong> en VS Code</li>
                    <li>Abrir <code>frontend/public/index.html</code></li>
                </ul>
            </li>
            <li>Herramientas de prueba:
                <ul>
                    <li><strong>Postman/Thunder Client:</strong> Para probar endpoints API</li>
                    <li><strong>Consola del navegador:</strong> Depurar JavaScript</li>
                </ul>
            </li>
        </ol>
    </div>

    <div class="section">
        <h2>11. Despliegue</h2>
        <h3>Plataformas gratuitas recomendadas</h3>
        <table>
            <tr>
                <th>Componente</th>
                <th>Plataforma</th>
                <th>Pasos clave</th>
            </tr>
            <tr>
                <td>Backend</td>
                <td>Render</td>
                <td>Crear Web Service > Conectar repositorio GitHub > Configurar variables de entorno (MONGO_URI)</td>
            </tr>
            <tr>
                <td>Base de Datos</td>
                <td>MongoDB Atlas</td>
                <td>Crear cluster gratis > Whitelist IP 0.0.0.0/0 > Obtener MONGO_URI</td>
            </tr>
            <tr>
                <td>Frontend</td>
                <td>Vercel</td>
                <td>Arrastrar carpeta frontend/public > Configurar como sitio estático</td>
            </tr>
        </table>
    </div>

    <div class="section">
        <h2>Recursos Adicionales</h2>
        <ul>
            <li><strong>Repositorio de ejemplo:</strong> <a href="https://github.com/ejemplo/web-recetas" target="_blank">GitHub - Web de Recetas</a></li>
            <li><strong>Documentación MongoDB Atlas:</strong> <a href="https://docs.atlas.mongodb.com/" target="_blank">https://docs.atlas.mongodb.com/</a></li>
            <li><strong>Documentación Express:</strong> <a href="https://expressjs.com/" target="_blank">https://expressjs.com/</a></li>
        </ul>
    </div>
</body>
</html>